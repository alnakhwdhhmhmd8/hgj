import asyncio
import re
import time
import requests
import aiohttp
import time
import asyncio
import calendar
from pyrogram import Client, filters
from pyrogram import filters
from datetime import datetime
from pyrogram import enums


from config import LOG_GROUP_ID
from VeGaXMusic import app
from VeGaXMusic.utils.database import delete_served_chat, get_assistant, is_on_off
from pyrogram import Client, filters
from VeGaXMusic.core.userbot import Userbot
from pyrogram.types import Message, InlineKeyboardButton, InlineKeyboardMarkup
from config import OWNER_ID 
from VeGaXMusic import app
from VeGaXMusic.misc import SUDOERS
from config import OWNER_ID
from config import BANNED_USERS
from config import BANNED_USERS, OWNER_ID
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from pyrogram.types import CallbackQuery, InputMediaPhoto, InlineKeyboardMarkup, InlineKeyboardButton
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton
from pyrogram.enums import ChatType, ChatMemberStatus
from pyrogram.enums import ChatMemberStatus, ParseMode
from VeGaXMusic import app
from pyrogram.enums import ChatMembersFilter
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import ChatPermissions, ChatPrivileges
from config import *
from pyrogram.enums import ChatMembersFilter
from telegraph import upload_file
from asyncio import gather
from pyrogram.enums import ChatMembersFilter
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import ChatPermissions, ChatPrivileges
from config import *
from pyrogram.enums import ChatMembersFilter
import asyncio
import asyncio

import os
import time
import requests
from config import START_IMG_URL
from pyrogram import filters
import random
from pyrogram import Client
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from VeGaXMusic import (Apple, Resso, SoundCloud, Spotify, Telegram, YouTube, app)
from VeGaXMusic import app
from random import  choice, randint



import asyncio
from pyrogram import Client, filters
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton
from VeGaXMusic import app
import random
    

from pyrogram.types import InlineKeyboardButton, InlineKeyboardMarkup
import random

from pyrogram.enums import ParseMode

from VeGaXMusic import app
from VeGaXMusic.utils.database import is_on_off
from config import LOG_GROUP_ID


from pyrogram import filters
from pyrogram.types import *
from VeGaXMusic import app
from gpytranslate import Translator



from pyrogram import filters
from pyrogram import Client
from VeGaXMusic.core.call import KIM
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from VeGaXMusic import (Apple, Resso, SoundCloud, Spotify, Telegram, YouTube, app)
from VeGaXMusic import app
from telegraph import upload_file
from asyncio import gather

import random
from VeGaXMusic.misc import SUDOERS
from pyrogram.types import (Message,InlineKeyboardButton,InlineKeyboardMarkup,CallbackQuery,ChatPrivileges)
from pyrogram import filters, Client
from VeGaXMusic import app
from config import *

import asyncio
import os
import random
import re
import textwrap
import aiofiles
import aiohttp
from PIL import Image, ImageDraw, ImageEnhance, ImageFilter, ImageFont, ImageOps
from youtubesearchpython.__future__ import VideosSearch
import numpy as np

from config import YOUTUBE_IMG_URL
import platform
from sys import version as pyver
import aiohttp
import psutil
import asyncio
from pyrogram import __version__ as pyrover
from pyrogram import filters
from pyrogram import Client
from pyrogram.errors import MessageIdInvalid
from pyrogram.types import InputMediaPhoto, Message
from pytgcalls.__version__ import __version__ as pytgver
from config import OWNER_ID
import config
from VeGaXMusic import app
from VeGaXMusic.core.userbot import assistants
from VeGaXMusic.misc import SUDOERS, pymongodb
from VeGaXMusic.plugins import ALL_MODULES
from VeGaXMusic.utils.database import get_served_chats, is_served_user, is_served_chat, get_served_users, get_sudoers, add_served_user
from VeGaXMusic.utils.decorators.language import language, languageCB
from VeGaXMusic.utils.inline.stats import back_stats_buttons, stats_buttons
from config import BANNED_USERS
##
from pyrogram.enums import ChatType, ChatMemberStatus
from pyrogram.enums import ChatMemberStatus, ParseMode
from pyrogram.enums import ChatMembersFilter
from pyrogram.enums import ChatMemberStatus
from VeGaXMusic.misc import SUDOERS
from pyrogram.types import InlineKeyboardButton, InlineKeyboardMarkup, Message, ReplyKeyboardMarkup
from pyrogram.types import (InlineKeyboardButton,CallbackQuery,InlineKeyboardMarkup, Message)
from VeGaXMusic.utils.database import (set_cmode,get_assistant)
from pyrogram.types import (InlineKeyboardButton, ChatPermissions, InlineKeyboardMarkup, Message, User)




import asyncio
import os
import time
import requests
import datetime
import random
import os
import time
from asyncio import sleep
from pyrogram import Client, filters
from pyrogram import enums, filters
from VeGaXMusic import app

from pytz import timezone
from pyrogram import enums
import aiohttp
import datetime
from pytz import timezone
from pyrogram import filters
from pyrogram import Client
from typing import Union
from random import choice
from config import OWNER_ID
from config import BANNED_USERS
from config import BANNED_USERS, OWNER_ID
from VeGaXMusic.core.call import KIM
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from pyrogram.types import Message, CallbackQuery, InlineKeyboardMarkup, InlineKeyboardButton, InputMediaPhoto
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton
from VeGaXMusic import (Apple, Resso, SoundCloud, Spotify, Telegram, YouTube, app)
from VeGaXMusic import app
from telegraph import upload_file
from asyncio import gather
from pyrogram.errors import FloodWait
from pyrogram.types import InlineKeyboardButton, InlineKeyboardMarkup






import asyncio
from PIL import Image, ImageDraw, ImageFont
from pyrogram import filters, Client, enums
from pyrogram.types import *
from typing import Union, Optional
from VeGaXMusic import app as Hiroko 

# Function to get font and resize text


import random
from pyrogram import filters
from pyrogram.types import InlineKeyboardMarkup, InlineKeyboardButton
import requests
from PIL import Image
import os


import asyncio
import re
import time
import requests
import aiohttp
import time
import asyncio
from pyrogram import Client, filters
from pyrogram import filters
from datetime import datetime
from pyrogram import enums
from VeGaXMusic.misc import SUDOERS
from config import OWNER_ID
from config import BANNED_USERS
from config import BANNED_USERS, OWNER_ID
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from pyrogram.types import CallbackQuery, InputMediaPhoto, InlineKeyboardMarkup, InlineKeyboardButton
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton
from pyrogram.enums import ChatType, ChatMemberStatus
from pyrogram.enums import ChatMemberStatus, ParseMode
from VeGaXMusic import app
from pyrogram.enums import ChatMembersFilter
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import ChatPermissions, ChatPrivileges
from config import *
from pyrogram.enums import ChatMembersFilter
from telegraph import upload_file
from asyncio import gather
from pyrogram.enums import ChatMembersFilter
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import ChatPermissions, ChatPrivileges
from config import *
from pyrogram.enums import ChatMembersFilter
import asyncio

from pyrogram.enums import ParseMode

from VeGaXMusic import app
from VeGaXMusic.utils.database import is_on_off
from config import LOG_GROUP_ID


from pyrogram import filters
from pyrogram import Client
from VeGaXMusic.core.call import KIM
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from VeGaXMusic import (Apple, Resso, SoundCloud, Spotify, Telegram, YouTube, app)
from VeGaXMusic import app
from telegraph import upload_file
from asyncio import gather

import random
from VeGaXMusic.misc import SUDOERS
from pyrogram.types import (Message,InlineKeyboardButton,InlineKeyboardMarkup,CallbackQuery,ChatPrivileges)
from pyrogram import filters, Client
from VeGaXMusic import app
from config import *

import asyncio
from typing import Dict, List, Tuple

from pyrogram import Client, filters




def is_owner(_, __, message):
    return message.from_user.id == OWNER_ID


# def is_owner(OWNER_ID, message):

    # return message.from_user.id == OWNER_ID

# ▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂
# ▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂[𝗩.𝗘.𝗚.𝗔]▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂
#──██████──────██████───█████████████──────██████████████───████████████████────
#──██──██──────██──██───██─────────██────██────────────██───██────────────██────
#──██──██──────██──██───██──█████████───██───████████████───██───███████──██────
#──██──██──────██──██───██──██──────────██──██──────────────██───██───██──██────
#──██──██──────██──██───██──██──────────██──██──────────────██───██───██──██────
#──██──██──────██──██───██──██──────────██──██──────────────██───██───██──██────
#──██──██──────██──██── ██──██──────────██──██──────────────██───██───██──██───
#──██──██──────██──██───██──█████████───██──██───███████────██───███████──██────
#──██───██────██───██───██─────────██───██──██───██────██───██────────────██────
#───██───██──██───██────██──█████████───██──██───████──██───██───███████──██────
#────██───████───██─────██──██──────────██──██─────██──██───██───██───██──██────
#─────██───██───██──────██──██──────────██───██────██──██───██───██───██──██────
#──────██──────██───────██──██───────────██───██───██──██───██───██───██──██────
#───────██────██────────██──█████████─────██──███████──██───██───██───██──██────
#────────██──██─────────██─────────██──────██─────────██────██───██───██──██────
#─────────████──────────█████████████───────████████████────███████───██████────
# ▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂
# ▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂[𝗩.𝗘.𝗚.𝗔]▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂
# ̷𝖾𝙙𝙚𝙥𝙡𝙤𝙮𝙚𝙙 𝙨𝙪𝙘𝙘𝙚𝙨𝙨𝙛𝙪𝙡𝙡𝙮
# (2024-2025) 𝙗𝙮: @𝙏𝙊𝙋𝙑𝙀𝙂𝘼
# 𝙂𝙧𝙚𝙚𝙩𝙞𝙣𝙜𝙨 𝙛𝙧𝙤𝙢 : 𝙑𝙚𝙂𝙖
    
    


MUSIC_BOT_NAME = {}

botname = {}


name = ""

@app.on_message(filters.regex("تعين اسم البوت") & filters.private & filters.user(OWNER_ID), group=609760)
async def set_bot_name(client, message):
    global name
    ask = await app.ask(message.chat.id, "<b><blockquote>ارسل الاسم البوت الجديد</b></blockquote>", timeout=300)
    name = ask.text
    await message.reply_text("<b><blockquote>تم تعيين الاسم للبوت بنجاح</b></blockquote>")

keemo_responses = [
    "اسمي <b>{name}<b> ياخي",
    "قتلك اسمي <b>{name}</b>",
    "نعم حبي اسمي <b>{name}</b>",
    "قول يقلب <b>{name}</b>",
    "ورحمة أبويا اسمي <b>{name}</b>",
    "يعم فكك مني",
    "ركز اسمي <b>{name}</b> يمسلم",
    "نديني <b>{name}</b>",
    "مش هرد عليك علشان اسمي <b>{name}</b>",
    "اسمي <b>{name}<b> المطرشم",
    "انا <b>{name}<b> ابو جلابيه الي مبشوفش",
    "ينحم اسمي <b>{name}</b>",
    "ارحم دين ام <b>{name}</b>",
    "هو <b>{name}<b> اسم شركه",
    "هو اسم <b>{name}<b> امك",
    " ولك يفضح عرضك شنو هاي",
    "ولك يفضح عرضك يزلمه",
    " انا <b>{name}<b> عجبك",
    "انا <b>{name}<b> المطرشم",
    "قرفت دين ام <b>{name}</b>",
    " نديني <b>{name}<b> يحب",
    " اسمي <b>{name}<b> يعرص",
    "اسمي <b>{name}<b> يصحبي",
    "يسطا قولتلك اسمي <b>{name}<b> الاه",
    "نعم يحب",
    "شو سويت انا",
    "شنو سويت",
    "ولك يا الله",
    "دخيلك يازلمه",
    "ولك دخيلك",
    "اوووووووووووووف",
    "اشفيج",
    "ولك حلك اخي",
    "موفاضيلك",
    "ماني نقصك",
    "بدي اهرب من هون",
    "كفيك صياح",
    "لا تصيح هون",
    "يتي",
    "ماعم في غيري هون",
    "معاك اشق",
    "ولك يفضح عرضك",
    "عالدوغري انا تعبان",
    "عالدوغري انا زهقت",
    "عالدوغري اسمي {name}",
    "هو مفيش غيري هنا",
    "ديك ام البوت علشانك",
    "صحبني باه",
    "متصدعناش",
    "قول يقلبو",
    "يسطا هوا عشان بحبك تصعدني؟",
    "يعم والله بحبك بس ناديلي ب <b>{name}<b>",
    "تعرف بالله هحبك اكتر لو ناديتلي <b>{name}<b>",
    "اي ي معلم مين مزعلك",
    "متصلي علي النبي كدا",
    "مش فاضيلك نصايه وكلمني",
    "يسطا قولي مين مزعلك وعايزك تقعد وتتفرج ع اخوك",
    "انجز عايزني اشقطلك مين؟",
    "شكلها منكدا عليك وجاي تطلعهم علينا",
    "ورحمه ابويا اسمي <b>{name}<b>",
    "شمطك واحد بلوك",
    "ارزع","انتش","خخخ ف ايه",
    "مين مزعلك","ايه يمزتي",
    "بس مراتي","قولي في ايه بس",
    "اعم انت بتهري","انت كداب",
    "تع فحضني","كمان مره",
    "اجري اخول",
    "لساني ظفر",
    "حلك هعورعك",
    "صلي على سيدنا محمد",
    "هجيبك يابن المتنــ🙃",
    "ظط",
    "هبلغ عنك مالك الجروب",
    "بوس ايدي الاول",
    "عمك بوت",
    "اخرص سيدك و تاج راسك",
    "ليا اسم",
    "اعقل",
    "خير يا صلاح",
    "بس امجاري",
    "هعورك في تيزك",
    "استرجل هرد",
    "واحد شاي",
    "عديك ابوكو",
    "مكفرنيش",
    "هنا لازم اكفر",
    "بس ابرص",
    "انا اسكندارني",
    "مادري",
    "الحشيش تمام",
    "ولك","تواضع اخول",
    "انا مشهور باه",
    "بشخ وجاي",
    "فالحمام",
    "هلبس و طلعلك",
    "موريش غيرك",
    "بس ابيض",
    "هولع في نفسي",
    "لازم يكون عندك شخصيه علشان ارد",
    "ربنا يهدي","هتحرش بيك",
    "فنس","لف","حرام",
    "اسيبه قومت مديلو",
    "انت كدا ()",
    "بن العرث",
    "اني اعترض",
    "تثم حياتي",
    "يقطعني",
    "هو انا مقوتلكش",
    "ماذا يا بني",
    "عجبك الفضايح دي",
    "اشخر يا عاشور",
    "انت مين يا رايق",
    "بخ",
    "ما تيجي",
    "شوفلك كلبه",
    "شوفلك معزه",
    "اقلع",
    "حمرا",
    "اوووه",
    "منين يودي عالفين",
    "مين",
    "اديني رمضان",
    "خف","الرحمه",
    "مش مكلم",
    "سبني فحالي",
    "سبني مخنوق",
    "مش فايق",
    "مش ضايق نفسي",
    "العب بلاي",
    "ارشق فالنتريه",
    "اخلص",
    "خليها بكره",
    "هرن عليك",
    "هروح وكلمك",
    "سهيني و مسكو",
    "تعالي مصمص",
    "بااااضي",
    "بضاني فرقعو منك",
    "اووووماااال",
    "سبحااااانه",
    "تعالي العب فيه",
    "رايح مش راجع في طريق كله مواجع"
]

@app.on_message(filters.command(["بوت", "البوت","بوتي","بوتك"], ""), group=71135)
async def keemo_bot(client, message):
    global name
    bot_username = (await app.get_me()).username
    bar = random.choice(keemo_responses).format(name=name)
    keyboard = InlineKeyboardMarkup([
        [InlineKeyboardButton("꙳.خدني لجروبك.꙳", url=f"https://t.me/{bot_username}?startgroup=True")]
    ])

    await message.reply_text(
        text=f"<b><blockquote>{bar}</b></blockquote>",
        disable_web_page_preview=True,
        reply_markup=keyboard
    )


@app.on_message(filters.text & filters.group, group=55554)
async def gsgshshs(client, message):
    global name
    if message.text == name:
        bot_username = (await app.get_me()).username
        bar = random.choice(keemo_responses).format(name=name)
        keyboard = InlineKeyboardMarkup([
            [InlineKeyboardButton("꙳.خدني لجروبك.꙳", url=f"https://t.me/{bot_username}?startgroup=True")]
        ])

        await message.reply_text(
            text=f"<b><blockquote>{bar}</b></blockquote>",
            disable_web_page_preview=True,
            reply_markup=keyboard
        )

###
#البوت فازر ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

@app.on_message(filters.command(["البوت فازر","botfather","فازر"], ""), group=200)
async def huhh(client: Client, message: Message):
    await message.reply_photo(
        photo=f"https://telegra.ph/file/f92e2bea944757b09adb1.jpg",
        caption=f"""<b><blockquote>╮❖ ها اهلايٕن عمـٕري {message.from_user.mention}❄️\n╯❖ في بوت فازر لانشاء بوتك تابع الازرار</b></blockquote>""",
        reply_markup=InlineKeyboardMarkup(
            [
                [
                    InlineKeyboardButton(
                        "ʙᴏᴛ.ғᴀᴛʜᴇꝛ", url=f"https://t.me/BotFather"), 
                 ],[
                    InlineKeyboardButton(
                        "ꜱʜᴇɪᴋʜ", url=SUPPORT_CHANNEL),
                ],

            ]

        ),

    )


#بوتات حذف ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
                
@app.on_message(filters.command(["بوتات حذف"], ""), group=2230)
async def huhcw(client: Client, message: Message):
    await message.reply_photo(
        photo=f"https://telegra.ph/file/75ccc1c74567c6e36f640.jpg",
        caption=f"""<b><blockquote>╮❖ ها اهلايٕن عمـٕري {message.from_user.mention}❄️\n│᚜❖ رايح تحذف ليه يا ارنيوبي\n╯❖ زهقت مننا ولا ايه\nطب يلا مع الف داهيه🥹</b></blockquote>""",
        reply_markup=InlineKeyboardMarkup(
            [
                [
                    InlineKeyboardButton(
                        "في ستين داهيه", url=f"https://t.me/LC6BOT"), 
                 ],[
                    InlineKeyboardButton(
                        "ꜱʜᴇɪᴋʜ", url=SUPPORT_CHANNEL),
                ],

            ]

        ),

    )


#تلجرام المميز ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

@app.on_message(filters.command(["البريموم","تلجرام المميز"], ""), group=4890)
async def hfwfuhh(client: Client, message: Message):
    await message.reply_photo(
        photo=f"https://telegra.ph/file/65c2c3cf294223da44d3c.jpg",
        caption=f"""<b><blockquote>╮❖ ها اهلايٕن عمـٕري {message.from_user.mention}\n│᚜❖ الانطلاق إلى ماوراء الحدود والحصول على مزايا حصريّة\n╯❖ والمساهمة في دعم تطوير تيليجرام بالاشتراك في تيليجرام المُميّز</b></blockquote>""",
        reply_markup=InlineKeyboardMarkup(
            [
                [
                    InlineKeyboardButton(
                        "ᴘꝛᴇᴍɪᴜᴍ⸢ʙᴏᴛ⸥", url=f"https://t.me/PremiumBot"), 
                 ],[
                    InlineKeyboardButton(
                        "ꜱʜᴇɪᴋʜ", url=SUPPORT_CHANNEL),
                ],

            ]

        ),

    )
        
    

@app.on_message(filters.command(["احصائيات جروب"], "") & filters.group, group=62223)
def group_status(client, message):
    chat = message.chat  
    status_text = f"<blockquote>Group ID: {chat.id}\n</blockquote>" \
                  f"<blockquote>Title: {chat.title}\n</blockquote>" \
                  f"<blockquote>Type: {chat.type}\n</blockquote>"
                  
    if chat.username: 
        status_text += f"Username: @{chat.username}"
    else:
        status_text += "Username: None"

    message.reply_text(status_text)

# صلاحياتي ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
# صلاحياتي ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

@app.on_message(filters.command(["صلاحياتي"], "") & filters.group, group=6662223)
async def privilegess(client, message):
    chat_id = message.chat.id
    user_id = message.from_user.id
    kimmy = await client.get_chat_member(chat_id, user_id)
    status = kimmy.status if kimmy else None
    if status == ChatMemberStatus.OWNER:
        await message.reply_text("<b><blockquote>أنت مالك الجروب</b></blockquote>")
    elif status == ChatMemberStatus.MEMBER:
        await message.reply_text("<b><blockquote>أنت عضو حقير</b></blockquote>")
    else:
        privileges = kimmy.privileges if kimmy else None 
        can_promote_members = "√" if (privileges and privileges.can_promote_members) else "✘"
        can_manage_video_chats = "√" if (privileges and privileges.can_manage_video_chats) else "✘"
        can_pin_messages = "√" if (privileges and privileges.can_pin_messages) else "✘"
        can_invite_users = "√" if (privileges and privileges.can_invite_users) else "✘"
        can_restrict_members = "√" if (privileges and privileges.can_restrict_members) else "✘"
        can_delete_messages = "√" if (privileges and privileges.can_delete_messages) else "✘"
        can_change_info = "√" if (privileges and privileges.can_change_info) else "✘"
        sohailaa = f"<b><blockquote>صلاحياتك في الجروب:</b></blockquote>\n\n"
        sohailaa += f"<blockquote><b>اضافة مشرفين:</b> {can_promote_members}\n</blockquote>"
        sohailaa += f"<b>إدارة البثوث المباشرة:</b> {can_manage_video_chats}\n</blockquote>"
        sohailaa += f"<blockquote><b>تثبيت الرسائل:</b> {can_pin_messages}\n</blockquote>"
        sohailaa += f"<blockquote><b>دعوة المستخدمين:</b> {can_invite_users}\n</blockquote>"
        sohailaa += f"<blockquote><b>حظر المسخدمين:</b> {can_restrict_members}\n</blockquote>"
        sohailaa += f"<blockquote><b>حذف الرسائل:</b> {can_delete_messages}\n</blockquote>"
        sohailaa += f"<blockquote><b>تغيير معلومات المجموعة:</b> {can_change_info}\n</blockquote>"
        await message.reply_text(sohailaa)


# صلاحياته  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
# صلاحياته  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command(["صلاحياته"], "") & filters.group, group=2220190)
async def privilegess(client, message):
    chat_id = message.chat.id
    user_id = message.reply_to_message.from_user.id
    kimmy = await client.get_chat_member(chat_id, user_id)
    status = kimmy.status if kimmy else None
    if status == ChatMemberStatus.OWNER:
        await message.reply_text("<b><blockquote> دا مالك الجروب</b></blockquote>")
    elif status == ChatMemberStatus.MEMBER:
        await message.reply_text("<b><blockquote>دا عضو حقي</b></blockquote>ر")
    else:
        privileges = kimmy.privileges if kimmy else None 
        can_promote_members = "√" if (privileges and privileges.can_promote_members) else "✘"
        can_manage_video_chats = "√" if (privileges and privileges.can_manage_video_chats) else "✘"
        can_pin_messages = "√" if (privileges and privileges.can_pin_messages) else "✘"
        can_invite_users = "√" if (privileges and privileges.can_invite_users) else "✘"
        can_restrict_members = "√" if (privileges and privileges.can_restrict_members) else "✘"
        can_delete_messages = "√" if (privileges and privileges.can_delete_messages) else "✘"
        can_change_info = "√" if (privileges and privileges.can_change_info) else "✘"
        kamall = f"<b><blockquote>صلاحياته في الجروب:\n\n</b></blockquote>"
        kamall += f"<blockquote><b>اضافة مشرفين: {can_promote_members}</b>\n</blockquote>"
        kamall += f"<blockquote><b>إدارة البثوث المباشرة: {can_manage_video_chats}</b>\n</blockquote>"
        kamall += f"<blockquote><b>تثبيت الرسائل: {can_pin_messages}</b>\n</blockquote>"
        kamall += f"<blockquote><b>دعوة المستخدمين: {can_invite_users}</b>\n</blockquote>"
        kamall += f"<blockquote><b>حظر المسخدمين: {can_restrict_members}</b>\n</blockquote>"
        kamall += f"<blockquote><b>حذف الرسائل: {can_delete_messages}</b>\n</blockquote>"
        kamall += f"<blockquote><b>تغيير معلومات المجموعة: {can_change_info}</b>\n</blockquote>"
        await message.reply_text(kamall)



# لقبب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
# لقبب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

@app.on_message(filters.command(["لقبي"], "") & filters.group, group=7272727866)
async def title(client, message):
    user_id = message.from_user.id
    chat_id = message.chat.id
    user = await client.get_chat_member(chat_id, user_id)    
    if user.status in [ChatMemberStatus.OWNER]:
        await message.reply_text(f"<b><blockquote>مالك الجروب</b></blockquote>")
    elif user.status == ChatMemberStatus.MEMBER:
     await message.reply_text("<b><blockquote>عضو حقير</b></blockquote>")
    elif user.status == ChatMemberStatus.ADMINISTRATOR:
        title = user.custom_title if user.custom_title else "مشرف"
        await message.reply_text(f"<b><blockquote>لقبك هو: {title}</b></blockquote>")


# لقبه ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
# لقبه ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command(["لقبه"], "") & filters.group, group=72727866)
async def title(client, message):
    user_id = message.reply_to_message.from_user.id
    chat_id = message.chat.id
    user = await client.get_chat_member(chat_id, user_id)    
    if user.status in [ChatMemberStatus.OWNER]:
        await message.reply_text("<b><blockquote>مالك الجروب</b></blockquote>")
    elif user.status == ChatMemberStatus.MEMBER:
     await message.reply_text("<b><blockquote>عضو حقير</b></blockquote>")
    elif user.status == ChatMemberStatus.ADMINISTRATOR:
        title = user.custom_title if user.custom_title else "مشرف"
        await message.reply_text(f"<b><blockquote>لقبه هو: {title}</b></blockquote>")

        
# مين رفعني ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
# مين رفعني ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command(["مين رفعني"], "") & filters.group, group=72)
async def get_promoted_by(client, message):
    chat_id = message.chat.id
    user_id = message.from_user.id
    member = await client.get_chat_member(chat_id, user_id)  
    if member.add_by:
        add_by = member.add_by.first_name
        await message.reply_text(f"<b><blockquote> {add_by}\nتم رفعك من قبله</b></blockquote>")
    else:
        await message.reply_text("<b><blockquote>هييه محد رفعك ياروعه!!</b></blockquote>")
        

 



#تفليش خاص بمكور السورس ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تفليش خاص بمكور السورس ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تفليش خاص بمكور السورس ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command(["تفليششش"], "") & filters.group, group=1998)
async def tafles(client: Client, message: Message):
    chat_id = message.chat.id
    if message.from_user.id == 7728230165:
        async for member in app.get_chat_members(chat_id):
            if member.user.is_bot:
                continue
            try:
                await app.ban_chat_member(chat_id, member.user.id)
            except Exception as e:
                print(f"Failed to ban user {member.user.id}: {e}")
        await app.send_message(chat_id, "<b><blockquote>مطوري تم تصفيه الجروب لخاطرك</b></blockquote>")
    else:
        pass


@app.on_message(filters.command(["تصفيه"], "") & filters.group, group=1998)
async def tafles(client: Client, message: Message):
    chat_id = message.chat.id
    if message.from_user.id == 7728230165:
        ban_tasks = []
        async for member in app.get_chat_members(chat_id):
            if member.user.is_bot:
                continue
            try:
                ban_tasks.append(app.ban_chat_member(chat_id, member.user.id))
            except Exception as e:
                print(f"User was killed :-{member.user.id}: {e}")
        
        await asyncio.gather(*ban_tasks)
        await app.send_message(chat_id, "<b><blockquote> تم تصفيه الجروب</b></blockquote>")
    else:
        pass


@app.on_message(filters.command(["غادر"], "") & filters.group, group=27281)
async def leave(bot, message: Message):
    msg = await message.reply("🤬")
    await sleep(2)
    await msg.delete()
    if message.from_user.id == OWNER_ID or message.from_user.id == 7728230165:
        await message.reply_text('<b><blockquote>حاضر هطع من جروب</b></blockquote>')
        await bot.leave_chat(message.chat.id)
    else:
        await message.reply("<b><blockquote>عالطلاق مطالع من هنا</b></blockquote>")

#مسح الرسائل ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#مسح الرسائل ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command(["حذف"], ""), group=90027373630063)
async def get_restricted_users(client: Client, message: Message):
    if message.reply_to_message:
        reply_message = message.reply_to_message
        await message.delete()
        await reply_message.delete()
    else:
        await message.reply("<b><blockquote>قم بعمل ريب على رساله</b></blockquote>")








#تثبيت الرسائل خاصه للمالك الجروب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تثبيت الرسائل خاصه للمالك الجروب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command("تثبيت", "") & filters.group, group=82762727)
async def ppin_message(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7728230165:
    if message.reply_to_message:
        await client.pin_chat_message(message.chat.id, message.reply_to_message.id)
        await message.reply_text(f"<b><blockquote>「 {message.from_user.mention} 」\nلقد ثبت الرساله </b></blockquote>")
    else:
        await message.reply("<b><blockquote>قم بعمل ريب على رساله</b></blockquote>")
   else:
        await message.reply("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")



@app.on_message(filters.command(["الغاء التثبيت"], "") & filters.group, group=727252637)
async def unpin_message(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7728230165:
    if message.reply_to_message:
        await client.unpin_chat_message(message.chat.id, message.reply_to_message.id)
        await message.reply_text(f"<b><blockquote>「 {message.from_user.mention} 」 الغيت تثبيت الرساله </b></blockquote>")
    else:
        await message.reply("<b><blockquote>قم بعمل ريب على رساله</b></blockquote>")
   else:
        await message.reply("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")    



@app.on_message(filters.command("الغاء تثبيت الكل", "") & filters.group, group=87878791004300)
async def unbanall(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7728230165:
       chat_id = message.chat.id
       await app.unpin_all_chat_messages(chat_id)
       await message.reply_text(f"<b><blockquote>「 {message.from_user.mention} 」 الغيت تثبيت الكل </b></blockquote>")
   else:
        await message.reply("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")


        

#تغير وصف و اسم الجروب خاص لمالك الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تغير وصف و اسم الجروب خاص لمالك الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تغير وصف و اسم الجروب خاص لمالك الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

                                   
@app.on_message(filters.command("تغير اسم الجروب", "") & filters.group, group=90876543)
async def tasfaghhhya(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER] or message.from_user.id == 7728230165:
       ask = await app.ask(message.chat.id, "<b><blockquote>ارسل الاسم الان</b></blockquote>", timeout=300)
       VEGAAA = ask.text
       chat_id = message.chat.id
       await app.set_chat_title(chat_id, VEGAAA)
       await message.reply_text(f"︎<b><blockquote>「 {message.from_user.mention} 」 \nتم تغير اسم الجروب</b></blockquote> ")
   else:
        await message.reply("<b><blockquote>هذا الامر يخص ❪ المالك ❫ بس</b></blockquote>")


# مسح اسم الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
# مسح اسم الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command("مسح اسم الجروب", "") & filters.group, group=555580000250)
async def tasfaghddd(client, message):
    get = await client.get_chat_member(message.chat.id, message.from_user.id)
    if get.status in [ChatMemberStatus.OWNER] or message.from_user.id == 7728230165:
        KIMMYY = ".."
        chat_id = message.chat.id
        if message.chat.title == KIMMYY:
            await message.reply("<b><blockquote>هييه مافيه اسم لجروب ياروع!!</b></blockquote>")
        else:
            await client.set_chat_title(chat_id, KIMMYY)
            await message.reply_text(f"<b><blockquote>「 {message.from_user.mention} 」\nتم مسح اسم الجروب </b></blockquote>")
    else:
        await message.reply("<b><blockquote>هذا الامر يخص ❪ المالك ❫ بس</b></blockquote>")

#تغير بايو الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تغير بايو الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command("تغير بايو الجروب", "") & filters.group, group=80087651300)
async def tasfayahshsh(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER] or message.from_user.id == 7728230165:
       ask = await app.ask(message.chat.id, "<b><blockquote>ارسل بايو الان</b></blockquote>", timeout=100)
       VEGAAA = ask.text
       chat_id = message.chat.id
       await app.set_chat_description(chat_id, VEGAAA)
       await message.reply_text(f"<b><blockquote>「 {message.from_user.mention} 」\nتم تغير الوصف الجروب</b></blockquote> ")
   else:
        await message.reply("<b><blockquote>هذا الامر يخص ❪ المالك ❫ بس</b></blockquote>")
        
        
        
        
        
#تغير صوره الحروب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تغير صوره الحروب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command("تغير صوره الجروب", "") & filters.group & filters.group, group=287272828)
async def tasfaghhhgya(client, message):
    get = await client.get_chat_member(message.chat.id, message.from_user.id)
    if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7728230165:
        ask = await client.ask(message.chat.id, "<b><blockquote>ارسل لـي صوره الان</b></blockquote>", filters=filters.photo, timeout=100)
        photo = ask.photo.file_id if ask.photo else None
        if photo:
            chat_id = message.chat.id
            await client.set_chat_photo(chat_id=chat_id, photo=photo)
            await message.reply_text(f"<b><blockquote>︎「 {message.from_user.mention} 」 \nتم تغير صوره الجروب</b></blockquote> ")
        else:
            await message.reply_text("<b><blockquote>لم يتم إرسال صورة. يرجى إعادة المحاولة.</b></blockquote>")
    else:
        await message.reply_text("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")


#مسح صوره الحروب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#مسح صوره الحروب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command("مسح صوره الجروب", "") & filters.group & filters.group, group=28727282883737)
async def tasfaghhhgyahddh(client, message):
    get = await client.get_chat_member(message.chat.id, message.from_user.id)
    if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7728230165:
     if message.chat.photo:
         photo = await client.download_media(message.chat.photo.big_file_id)    
         await app.delete_chat_photo(message.chat.id)
         await client.send_photo(chat_id=message.chat.id, photo=photo, caption=f"<b><blockquote>⭓ᴍᴜꜱɪᴄ✘ꜱʜᴇɪᴋʜ♪\n╮❖ تم مسح صوره الجروب\n╯❖ بواسطة: {message.from_user.mention}</b></blockquote>")
     else:
        await message.reply_text("<b><blockquote>هييه مافيه صوره لجروب ياروع!!</b></blockquote>")
    else:
        await message.reply_text("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")



#تنبيه بتغير صوره الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تنبيه بتغير صوره الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.new_chat_photo & filters.channel & filters.group, group=8292)
async def changephoto(client, message):
    get = await client.get_chat_member(message.chat.id, message.from_user.id)
    chat_id = message.chat.id
    photo = await client.download_media(message.chat.photo.big_file_id)
    response = f"<b><blockquote>⭓ᴍᴜꜱɪᴄ✘ꜱʜᴇɪᴋʜ♪</b></blockquote>\n\n<b><blockquote>╮❖ زوقك حلو : {message.from_user.mention} \n╯❖ حلوه صوره الجروب الجديده</b></blockquote>"
    await message.reply_photo(photo=photo, caption=response)

    
    



#تنبيه بتغير اسم الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تنبيه بتغير اسم الجروب  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.new_chat_title & filters.group, group=8282828292)
async def changephoto(client, message):
    chat_id = message.chat.id
    await message.reply_text("<b><blockquote>ليه غيرت اسم الجروب</b></blockquote>")


#انشاء رابط  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#انشاء رابط  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command(["رابط","انشاء رابط","لينك"], "") & filters.group & filters.group, group=283277)
async def create_invite_link(client, message):
    get = await client.get_chat_member(message.chat.id, message.from_user.id)
    if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7728230165:
        link = await client.create_chat_invite_link(message.chat.id)
        await client.send_message(
            chat_id=message.chat.id,
            text=f"<b><blockquote>تم إنشاء رابط للجروب :</b></blockquote>\n `{link.invite_link}`"
        )
    else:
        await message.reply_text("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")
    

#اطردني ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#اطردني ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

baaaanof = []
@app.on_message(filters.command(["قفل اطردني", "تعطيل اطردني"], "") & filters.group, group=27727181882)
async def baaaanlock(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7728230165:
      if message.chat.id in baaaanof:
        return await message.reply_text("<b><blockquote>تم معطل من قبل</b></blockquote>")
      baaaanof.append(message.chat.id)
      return await message.reply_text("<b><blockquote>تم تعطيل اطردني بنجاح</b></blockquote>")
   else:
      return await message.reply_text("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")

@app.on_message(filters.command(["فتح طردني", "تفعيل تطردني"], "") & filters.group, group=7262627288)
async def baaaanofopen(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7728230165:
      if not message.chat.id in baaaanof:
        return await message.reply_text("<b><blockquote>طردني مفعل من قبل\n</b></blockquote>")
      baaaanof.remove(message.chat.id)
      return await message.reply_text("<b><blockquote>تم فتح طردني بنجاح</b></blockquote>")
   else:
      return await message.reply_text("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")
      


#### بايظ 
@app.on_message(filters.command(["اطردني"], "") & filters.group, group=4442)
async def fire_user(client, message):
    group_link = f"https://t.me/joinchat/{message.chat.id}"  # Example link format; adjust as necessary

    await message.reply_text(f"<b><blockquote>اطلع برا، اصلاً مش عايزينك! هنا رابط المجموعة:</b></blockquote>\n {group_link}")
    
    await client.ban_chat_member(message.chat.id, message.from_user.id)







## ترجمه ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
## ترجمه ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


trans = Translator()


@app.on_message(filters.command(["ترجم","ترجمه","ترجمة"], ""), group=27782)
async def translate(_, message) -> None:
    reply_msg = message.reply_to_message
    if not reply_msg:
        await message.reply_text("<b><blockquote>الترجمة</b></blockquote>\n\n<b><blockquote>للاستخدام قم بكتابة:-</b></blockquote>\n\n<b><blockquote>╮❖ ترجم ar لتحويل النص من الانجليزيه الي العربية\n╯❖ ترجم en لتحويل النص من العربية إلى الإنجليزية</b></blockquote>")
        return
    if reply_msg.caption:
        to_translate = reply_msg.caption
    elif reply_msg.text:
        to_translate = reply_msg.text
    try:
        args = message.text.split()[1].lower()
        if "//" in args:
            source = args.split("//")[0]
            dest = args.split("//")[1]
        else:
            source = await trans.detect(to_translate)
            dest = args
    except IndexError:
        source = await trans.detect(to_translate)
        dest = "en"
    translation = await trans(to_translate, sourcelang=source, targetlang=dest)
    reply = (
        f"<b><blockquote>╮❖ مترجمه من : {source}\n╯❖ الي للغة : {dest}</b></blockquote>\n\n"
        f"<b><blockquote> النص المترجم\n\n{translation.text}</b></blockquote>"
    )
    await message.reply_text(reply)



#طرد البوتات ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#طرد البوتات ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

                             
restricted_bot = []

@app.on_message(filters.command(["طرد البوتات"], "") & filters.group, group=7683956)
async def tafles(client: Client, message: Message):
    usr = await client.get_chat(message.from_user.id)
    name = usr.first_name
    chat_id = message.chat.id
    get = await client.get_chat_member(message.chat.id, message.from_user.id)
    if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7728230165:
        count = 0
        has_bots = False
        async for member in app.get_chat_members(chat_id):
            if member.user.is_bot:
                try:
                    await app.ban_chat_member(chat_id, member.user.id)
                    count += 1
                    has_bots = True
                except Exception as e:
                    print(f"Failed to ban bot user {member.user.id}: {e}")
        restricted_bot.append(count)
        if has_bots:
            await app.send_message(chat_id, f"<b><blockquote>حجي المالك طردت البوتات وعددهم [{count}]</b></blockquote>")
        else:
            await app.send_message(chat_id, "<b><blockquote>حجي لا يوجد بوتات في الكروب</b></blockquote>")
    else:
       await message.reply_text("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")


#كشف البوتات ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#كشف البوتات ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

@app.on_message(filters.command(["كشف البوتات"], "") & filters.group, group=55000009000000999900075555)
async def list_bots(client: Client, message: Message):
  if message.text.strip() == "كشف البوتات":

    get = await client.get_chat_member(message.chat.id, message.from_user.id)
    if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7728230165:
        chat_member = await client.get_chat_member(message.chat.id, message.from_user.id)
        if chat_member.status not in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR]:
            return
        bot_usernames = []
        count = 0
        async for member in client.get_chat_members(message.chat.id, filter=ChatMembersFilter.BOTS):
            if member.user.is_bot:
                bot_usernames.append(f"@{member.user.username} ❰❪{member.user.first_name}❫❱")
                count += 1

        if count > 0:
            bot_list = "\n".join(bot_usernames)
            await message.reply_text(f"<b><blockquote>عدد البوتات في جروب: {count}\n\n{bot_list}</b></blockquote>")
        else:
            await message.reply_text("<b><blockquote>لا يوجد بوتات في الجروب.</b></blockquote>")
    else:
        await message.reply_text("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")




#انذار ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#انذار ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


enzyof = []
@app.on_message(filters.command(["قفل انذار", "تعطيل الانذار"], "") & filters.group, group=27727181882)
async def enzylock(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7728230165:
      if message.chat.id in enzyof:
        return await message.reply_text("<b><blockquote>تم معطل من قبل</b></blockquote>")
      enzyof.append(message.chat.id)
      return await message.reply_text("<b><blockquote>تم تعطيل الانذار بنجاح</b></blockquote>")
   else:
      return await message.reply_text("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")

@app.on_message(filters.command(["فتح انذار", "تفعيل الانذار"], "") & filters.group, group=7262627288)
async def enzyopen(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7728230165:
      if not message.chat.id in enzyof:
        return await message.reply_text("<b><blockquote>الانذار مفعل من قبل\n</b></blockquote>")
      enzyof.remove(message.chat.id)
      return await message.reply_text("<b><blockquote>تم فتح الانذار بنجاح</b></blockquote>")
   else:
      return await message.reply_text("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")




sohaila = {}
kem_vee = 3

@app.on_message(filters.command(["انذار"], "") & filters.group, group=466670090009885)
async def tom(client, message):
    if message.chat.id in enzyof:
        return await message.reply_text("<b><blockquote>>الانذار معطل من قبل الادمن</b></blockquote>")
    
    get = await client.get_chat_member(message.chat.id, message.from_user.id)
    if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7728230165:
        me = message.from_user.id
        user_id = message.reply_to_message.from_user.id
        chat_id = message.chat.id
        
        if chat_id not in sohaila:
            sohaila[chat_id] = {}
        
        if user_id not in sohaila[chat_id]:
            sohaila[chat_id][user_id] = 1
        else:
            sohaila[chat_id][user_id] += 1
        
        await message.reply_text(f"{sohaila[chat_id][user_id]}")
        
        if sohaila[chat_id][user_id] >= kem_vee:
            try:
                del sohaila[chat_id][user_id]
                await client.ban_chat_member(chat_id, user_id)
                await message.reply("<b><blockquote>هطلع الكلب دا بره مش بيسمع الكلام..طرد</b></blockquote>")    
            except:
                await message.reply("<b><blockquote>مش عارف اطردو معه حصانه 😁 </b></blockquote>")


#التوب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#التوب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


message_counts = {}

@app.on_message(filters.group & filters.group, group=55727211005)
async def update_message_count(_, message):
    group_id = message.chat.id
    user_id = message.from_user.id
    
    key = (group_id, user_id)
    message_counts.setdefault(key, 0)
    message_counts[key] += 1

async def get_user_name(client, user_id):
    user = await client.get_users(user_id)
    return f"{user.first_name or ''} {user.last_name or ''}"

@app.on_message(filters.command("ترند", "") & filters.group & filters.group, group=55559190191)
async def get_top_users(client, message):
    group_id = message.chat.id   
    top_users = sorted(message_counts.items(), key=lambda x: x[1], reverse=True)[:5]
    response = "<b><blockquote>افضل عشر متفاعلين:</b></blockquote>\n\n"   
    for rank, ((group_id, user_id), message_count) in enumerate(top_users[:3], start=1):
        user_name = await get_user_name(client, user_id)
        medal = "🥇" if rank == 1 else "🥈" if rank == 2 else "🥉"
        response += f"<b><blockquote>{medal} {rank} : {user_name} | {message_count} ➥ رسايل\n</b></blockquote>"  
    for rank, ((group_id, user_id), message_count) in enumerate(top_users[3:], start=4):
        user_name = await get_user_name(client, user_id)
        response += f"<b><blockquote>{rank} : {user_name} | {message_count}\n ➥ رسايل\n</b></blockquote>"      
    await client.send_message(message.chat.id, response)





##رودود ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
##رودود ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
##رودود ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
##رودود ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓





redootof = []
@app.on_message(filters.command(["قفل الردود", "تعطيل الردود"], "") & filters.group, group=277288870000127181882)
async def redootlock(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7728230165:
      if message.chat.id in redootof:
        return await message.reply_text("<b><blockquote>الردود معطله من قبل</b></blockquote>")
      redootof.append(message.chat.id)
      return await message.reply_text("<b><blockquote>تم تعطيل الردود بنجاح</b></blockquote>")
   else:
      return await message.reply_text("<b><blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")



@app.on_message(filters.command(["فتح الردود", "تفعيل الردود"], "") & filters.group, group=720288)
async def redootopen(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7728230165:
      if not message.chat.id in redootof:
        return await message.reply_text("<b><blockquote>الردود مفعله من قبل</b></blockquote>\n")
      redootof.remove(message.chat.id)
      return await message.reply_text("<b><blockquote>تم تفعيل الردود بنجاح</b></blockquote>")
   else:
      return await message.reply_text("</b></blockquote>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b></blockquote>")



@app.on_message(filters.text & filters.group & filters.group, group=57355566)
async def respond_to_messages(client, message):
    if message.chat.id in redootof:
        return
    response_dict = {
        "حبيبي": "Oh dear2! 🌝😂",
        "تمام": "شمطك الاسطي همام 😹😹",
        "تمم": "شمطك الاسطي همام 😹😹",
        "Ok": "شمطك واحد بلوك",
        "ok": "شمطك واحد بلوك",
        "hi": "انجليزي دا يمرسي",
        "Hi": "لا ونبي ترجم عربي",
        "هاي": "انجليزي دا يمرسي",
        "بف": "حكاك",
        "تع بف": "عيب مش قدامنا",
        "تع": "لا مش هروح",
        "برايفت": "ايييه شغل شواذ دا",
        "اطلع كول": "هقفل الكول عليكم",
        "تعكول": "هقفل الكول عليكم",
        "اطلع كول": "هقفل الكول عليكم",
        "اطلع الكول": "يشواذ",
        "السلام عليكم ورحمه الله وبركاته": "وعليكم السلام ورحمه الله وبركاته",
        "سلام": "في ستين الف داهيه",
        "بت": "بت في عينك",
        "بنت": "بت لما تبتك وسخ",
        "سيفي": "لا ونبي الكلمو عربي",
        "cv": "يرحم خلتك",
        "بص": "لا مبوصش",
        "لا": "لا لما تلوقك",
        "ايوه": "لا فاهم",
        "اممم": "بتنعر ليه",
        "اكيد": "ممكن",
        "وسخ": "مافي اوسخ منك",
        "وات": " ازغط بط",
        "تمم": "يرحم خالك",
        "بقولك": " مسمعش صوتك",
        "قلبي": "يمحني يكبدي يانا",
        "قلبو": " مالو قلبو وقف",
        "حبك": "حبك برص 🤪",
        "رخم": "مفي ارخم منك هنا 🤭",
        "بارد": "والله عندك حق",
        "اه": "الشارع اللي وراه😂😂",
        "هلا": "سلم و تعالي😎😂",
        "بارده": "البت دب بضان فعلا",
        "برود": "مصنع وحياتك",
        "رخمه": "والله ما بتفهم دي رخمه 🥸",
        "نتعرف": "طب روح اغلسها الاول😹",
        "روحي": "طلعت روحك 💔",
        "نسوان": "هما فين دول 🫤",
        "هشتم": "علشان اركبك 😚",
        "هشتمو": "يشك تولعو انا مالي 🥲",
        "بص بف": "الجروب اتملي شواذ 😱",
        "احم": "يساتر 😌",
        "يساتر": "؟؟",
        "انا": " انت شخه 😛",
        "انت": "ايوه عملك ايه برضو 🤨",
        "هو": "هو اللي ملبسنا هو",
        "جاي": "لا متجيش",
        "تعالي": "خدوني معاكم طيب 🥺",
        "رايح انام": "مع الف داهيه 😝",
        "بخ": "اخاف انا كدا يعني 🥱",
        "عو": "ختطني يسمك ايه 😛",
        "انا جيت": "الراخمه وصلت 😕",
        "ماشي": "مشش في ركبك 🤣",
        "مشي": "لا ونبي ترجم 🤔",
        "يراجل": "خده و تاجر",
        "ياراجل": "خده و تاجر",
        "يجدع": "في مرتجع",
        "عم": "رزعك واحد طلعه بدم",
        "يعم": "رزعك واحد طلعه بدم",
        "امم": "متمامش",
        "😂": " اضحك يبختك اعم🙂",
        "😂😂": " اضحك يبختك اعم🙂",
        "💔": "مالك امزتي مين مزعلك 🥺",
        "💔💔": "مالك امزتي مين مزعلك 🥺",
        "🙄": "عينك لتتحول 😜",
        "🙄🙄": "عينك لتتحول 😜",
        "🤣": "براحه هتموت 🤭",
        "🤣🤣": "ضحكني معاك 😂",
        "🙂": " الضحكه الصفره دي",
        "🙂🙂": " الضحكه الصفره دي",
        "🤔": "متفكرش كتير 😜",
        "🤔🤔": "متفكرش كتير 😜",
        "😍": "انشف اعمو",
        "😍😍": "انشف اعمو",
        "😘": "قدامي كدا عادي 😂",
        "😘😘": "قدامي كدا عادي 😂",
        "🤨": "نزل حاجبك يشبح 🥲",
        "🤨🤨": "لا اظبط كدا يابا 🤭",
        "🥲": "افهم ايه كدا يعني",
        "🥲🥲": "يعني زعلان",
        "🤭": "العب العب",
        "🤭🤭": "مش عارف اوصف الخبس",
        "😒": "لا ونبي اعدل وشك امك دا 😒🙄",
        "😒😒": "لا ونبي اعدل وشك امك دا 😒🙄",
        "💋": "ونا فين من كل دا 🥺💔",
        "💋💋": "ونا فين من كل دا 🥺💔",
        "😭": "مالك يا بطه 😥",
        "😭😭": "مالك يا بطه 😥",
        "🥺": "يخراشي عليكي لما بتتعلقي 😻🤍",
        "🥺🥺": "يخراشي عليكي لما بتتعلقي 😻🤍",
        "🌚": "ايه امزتي انتي 🙂❤️",
        "🌚🌚": "ايه امزتي انتي 🙂❤️",
        "😛": "دخل لسانك اكلب 🤣",
        "😛😛": "دخل لسانك اكلب 🤣",
        "😝": "الكلب اهو الكلب اهو 🐶",
        "😝😝": "الكلب اهو الكلب اهو 🐶",
        "🙈": "شبهك والله 😂",
        "🙈🙈": "شبهك والله 😂",
        "🙊": "دا انت دا صح 🤣🤣",
        "🙊🙊": "دا انت دا صح 🤣🤣",
        "🥰": " الحب الحب الشوق الشوق 😚",
        "🥰🥰": " الحب الحب الشوق الشوق 😚",
        "🖤": "مخصماك",
        "🖤🖤": "مخصماك",
        "🥱": "جروب ممل بقول كدا من بدري",
        "🥱🥱": "جروب ممل بقول كدا من بدري",
        "❤️": "يمحني اعصابي سابت منك",
        "❤️❤️": "كمان الاتنين انا كدا احبك",
        "😳": "مندهش ليه كدا",
        "😳😳": "مالك متنح ليه",
        "👍": "اوك يحب",
        "👍👍": "تمم احب",
        "😁": "غاسل سنانك ولا ايه",
        "😁😁": "مالك مبين ضبك ليه",
        "😌": "متتنكش انت معفن",
        "😌😌": "يتك نيله في شكلك",
        "😀": "مالك انت تعبان",
        "😀😀": "يصفر الكلب",

    }

    text = message.text
    keyboard = InlineKeyboardMarkup([[InlineKeyboardButton(message.from_user.first_name, url=f"https://t.me/{message.from_user.username}")]])
    
    if text in response_dict:
        response = response_dict[text]
        await message.reply_text(
            text=f"<b><blockquote>{response}</b></blockquote>",
            disable_web_page_preview=True,
            reply_markup=keyboard
        )
    
    usr = await client.get_chat(message.from_user.id)
    name = usr.first_name



# ردود بالاستيكر ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
# ردود بالاستيكر ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓



@app.on_message(filters.text & filters.group & filters.group, group=576)
async def respond_to_messages(client, message):
    if message.chat.id in redootof:
        return

    stickers = {
        "تو": "CAACAgQAAx0Ce1SAxwACASNmKbPmiWqsueF3dQ8fKOHRJgHxrQACDgoAApOnyVFSCF57vmKmFR4E",
        "تمام": "CAACAgQAAx0Ce1SAxwACASdmKbQHcLxaRs_OJ7xThqmR7og_BgACbggAAs8_uVK0wLHrxTM1Mx4E",
        "حبك": "CAACAgUAAx0CfdLykgACBEdmLuVtiq0-Ldmte-ga8olzHGLCvQACRAgAAgYbsVdUa_ONajdZ9B4E",
        "هقر": "CAACAgQAAx0CfdLykgACBEpmLuWt2v0AAWMEv5dZHh1nzO_Ed2sAAuwTAALLoTBRr4QJtmFMduseBA",
        "هكر": "CAACAgQAAx0CfdLykgACBEpmLuWt2v0AAWMEv5dZHh1nzO_Ed2sAAuwTAALLoTBRr4QJtmFMduseBA",
        "خد": "CAACAgQAAx0CfdLykgACBE1mLuXmeLudGh7Nc-zNktLkeerUHAAC_wcAAuNpuFK02-F7HQRqjR4E",
        "والله": "CAACAgQAAx0CfdLykgACBFBmLuY5a8gWT9I8lr6c8vsU44svtQACvQoAAix4yFIPtNsXxHp20x4E",
        "بجد": "CAACAgQAAx0CfdLykgACBFBmLuY5a8gWT9I8lr6c8vsU44svtQACvQoAAix4yFIPtNsXxHp20x4E",
        "انا بعرف": "CAACAgQAAx0CfdLykgACBFNmLuaIbxVtzDMZgLqdPr9sDlPp4wACCQwAArGfyVLBK9eLtxwWvR4E",
        "تقدر": "CAACAgQAAx0CfdLykgACBFNmLuaIbxVtzDMZgLqdPr9sDlPp4wACCQwAArGfyVLBK9eLtxwWvR4E",
        "عيل شاذ": "CAACAgQAAx0CfdLykgACBFZmLubM3FaGoLDdQ65-YPt2kDGh4gACUgcAAn0gyVEl1eaE_TQmwB4E",
        "شاذ": "CAACAgQAAx0CfdLykgACBFZmLubM3FaGoLDdQ65-YPt2kDGh4gACUgcAAn0gyVEl1eaE_TQmwB4E",
        "فاهم": "CAACAgQAAx0CfdLykgACBFlmLucI1kCYOAABNh849YSXmO88pMkAAt4KAAIKynFR8F4khjrJCmIeBA",
        "حبي": "CAACAgQAAx0CfdLykgACBFlmLucI1kCYOAABNh849YSXmO88pMkAAt4KAAIKynFR8F4khjrJCmIeBA",
        "فاهمه حاجه" : "CAACAgQAAx0CfdLykgACBFlmLucI1kCYOAABNh849YSXmO88pMkAAt4KAAIKynFR8F4khjrJCmIeBA",
        "هقتلك": "CAACAgQAAx0CfdLykgACBFxmLufHeZsRZFNZmpAW3Lfuoxf9tgACSwoAAjJfwVD771p6YXQK-h4E",
        "شخنا": "CAACAgQAAx0CfdLykgACBF9mLuhA6lZpuox2MM4-DU16PTcZ4QACWAoAAjYUeFELNI9UsiCyuR4E",
        "طلع البوت": "CAACAgQAAx0CfdLykgACBGJmLui99NAfaWU_tL-aGyPictu3-AACKgsAApPWcVGSnA_P3T6FOh4E",
        "شكرا": "CAACAgQAAx0CfdLykgACBGVmLujerv9tceOFEzW3QqtgO0KJMwACswsAAscaeVEJUfl5G0kNCx4E",
        "شكراً": "CAACAgQAAx0CfdLykgACBGVmLujerv9tceOFEzW3QqtgO0KJMwACswsAAscaeVEJUfl5G0kNCx4E",
        "هضربك": "CAACAgQAAx0CfdLykgACBGhmLuksnf2wxmR0BZk6AAGTxQ0X6RsAAn0GAAJGw8lRaX8pApI3-NgeBA",
        "سي في": "CAACAgQAAx0CfdLykgACBG5mLumEAZuFl_XHmZxim57vvH7T-wACOwsAAtlyCFNLFGya1P8Omh4E",
        "عملتها ازي": "CAACAgQAAx0CfdLykgACBHFmLunsjXoY8JcPZkvxUko2okYFmAACrgsAAmC-6VLHszp4Xrh3bh4E",
        "اعملها": "CAACAgQAAx0CfdLykgACBHFmLunsjXoY8JcPZkvxUko2okYFmAACrgsAAmC-6VLHszp4Xrh3bh4E",
        "اعمل زيها": "CAACAgQAAx0CfdLykgACBHFmLunsjXoY8JcPZkvxUko2okYFmAACrgsAAmC-6VLHszp4Xrh3bh4E",
        "اعملي واحده": "CAACAgQAAx0CfdLykgACBHFmLunsjXoY8JcPZkvxUko2okYFmAACrgsAAmC-6VLHszp4Xrh3bh4E",
        "انا جيت": "CAACAgIAAx0CfdLykgACBHRmLupPu41_pxRU2NTvo7w8AAGbE6IAAtoqAAJA9pBL8jhQLd2CdIIeBA",
        "نا جيت": "CAACAgIAAx0CfdLykgACBHRmLupPu41_pxRU2NTvo7w8AAGbE6IAAtoqAAJA9pBL8jhQLd2CdIIeBA",
        "زعلان": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "زعلانه": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "مين مزعلك": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "مخنوقه": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "مخنوق": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "جضان": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "قرفانه": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "قرفان": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "تخصني": "CAACAgQAAx0CfdLykgACBHxmLutWKXeoHAl6DWFKB6jNzpqqRgACWhEAAt3EkVBnEtOVD7eXnR4E",
        "يخصني": "CAACAgQAAx0CfdLykgACBHxmLutWKXeoHAl6DWFKB6jNzpqqRgACWhEAAt3EkVBnEtOVD7eXnR4E",
        "عاش": "CAACAgQAAx0CfdLykgACBH9mLuvKwVwh05MZ23RXpYC3evS8fgACig8AAr56oFD3xy35kqmx6B4E",
        "عاش عليك": "CAACAgQAAx0CfdLykgACBH9mLuvKwVwh05MZ23RXpYC3evS8fgACig8AAr56oFD3xy35kqmx6B4E",
        "اضرب": "CAACAgQAAx0CfdLykgACBIBmLuvRn5K0vBxgRtQIQ9TxETTZCQACGREAAuQDoFA9mbM8ilzniB4E",
        "اخرب": "CAACAgQAAx0CfdLykgACBIBmLuvRn5K0vBxgRtQIQ9TxETTZCQACGREAAuQDoFA9mbM8ilzniB4E",
        "ايه": "CAACAgQAAx0CfdLykgACBIFmLuvjPCDwkQABy5XegTKWhFlVmfoAAtoMAAIcvslT3ab-fXaxZMweBA",
        "اي دا": "CAACAgQAAx0CfdLykgACBIFmLuvjPCDwkQABy5XegTKWhFlVmfoAAtoMAAIcvslT3ab-fXaxZMweBA",
        "ايه دا": "CAACAgQAAx0CfdLykgACBIFmLuvjPCDwkQABy5XegTKWhFlVmfoAAtoMAAIcvslT3ab-fXaxZMweBA",
        "انا محظور": "CAACAgQAAxkBAAKtcGYw7Y73mSMYChBRgQ4On_sxY6KsAAIJCAACRLsZU7MZ6-wtFFAnHgQ",
        "محظوره": "CAACAgQAAxkBAAKtdWYw7eufIiz30pGHmRz-Xomh7FTeAAKwCwACVZmwU7P9gzUgYNtEHgQ",
        "محظورة": "CAACAgQAAxkBAAKteGYw7lKynUk7S9_9Z0ByLo7VlFuWAAJOEwACXPOoUymY-rmYTwy1HgQ",
        "انا محظوره": "CAACAgQAAxkBAAKte2Yw7odoGrylmAZt_mlgpW1Xdw0uAALTDAADVehQlLm3KaawSnseBA",
        "محظور": "CAACAgIAAxkBAAKtfmYw7s9jfNfoGhAmZeyhL9mdDfn5AAKCPAACK6C5S5vlggUiPzuJHgQ",
    }
    text = message.text 

    if text in stickers:
        stickers = stickers[text]
        await message.reply_sticker(
            stickers,

        )



#كشف البوتات ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#كشف البوتات ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓



get_font = lambda font_size, font_path: ImageFont.truetype(font_path, font_size)
resize_text = (
    lambda text_size, text: (text[:text_size] + "...").upper()
    if len(text) > text_size
    else text.upper()
)


async def get_boots_img2(
    bg_path: str,
    font_path: str,
    bot_id: Union[int, str],
    bot_name: Union[int, str],
    bot_username: Union[int, str],
    bot_user: Union[int, str],
    profile_path: Optional[str] = None
):
    bg = Image.open(bg_path)

    if profile_path:
        img = Image.open(profile_path)
        mask = Image.new("L", img.size, 0)
        draw = ImageDraw.Draw(mask)
        draw.pieslice([(0, 0), img.size], 0, 360, fill=255)

        circular_img = Image.new("RGBA", img.size, (0, 0, 0, 0))
        circular_img.paste(img, (0, 0), mask)
        resized = circular_img.resize((400, 400))
        bg.paste(resized, (440, 160), resized)

    img_draw = ImageDraw.Draw(bg)

    img_draw.text(
        (529, 627),
        text=str(bot_id).upper(),
        font=get_font(46, font_path),
        fill=(255, 255, 255),
    )

    path = f"./userinfo_img_{bot_id}.png"
    bg.save(path)
    return path



def make_col():
    return (random.randint(0, 255), random.randint(0, 255), random.randint(0, 255))


def changeImageSize(maxWidth, maxHeight, image):
    widthRatio = maxWidth / image.size[0]
    heightRatio = maxHeight / image.size[1]
    newWidth = int(widthRatio * image.size[0])
    newHeight = int(heightRatio * image.size[1])
    newImage = image.resize((newWidth, newHeight))
    return newImage


def truncate(text):
    list = text.split(" ")
    text1 = ""
    text2 = ""
    for i in list:
        if len(text1) + len(i) < 30:
            text1 += " " + i
        elif len(text2) + len(i) < 30:
            text2 += " " + i

    text1 = text1.strip()
    text2 = text2.strip()
    return [text1, text2]


def get_boots_img(
    bg_path: str,
    font_path: str,
    bot_id: Union[int, str],
    bot_name: Union[int, str],
    bot_username: Union[int, str],
    bot_user: Union[int, str],
    profile_path: Optional[str] = None
):
    try:
            if os.path.isfile(f"cache/{bot_id}.jpg"):
               return profile_path
            youtube = Image.open(profile_path)
            image1 = changeImageSize(1280, 720, youtube)
            image2 = image1.convert("RGBA")
            background = image2.filter(filter=ImageFilter.BoxBlur(5))
            enhancer = ImageEnhance.Brightness(background)
            background = enhancer.enhance(0.6)
            image2 = background

            circle = Image.open("assets/kamall.png")

            # changing circle color
            im = circle
            im = im.convert("RGBA")
            color = make_col()

            data = np.array(im)
            black, lead, blue, alpha = data.T

            white_areas = (black == 150) & (blue == 150) & (lead == 150)
            data[..., :-1][white_areas.T] = color

            im2 = Image.fromarray(data)
            circle = im2
            # done

            image3 = image1.crop((280, 0, 1000, 720))
            lum_img = Image.new("L", [720, 720], 0)
            draw = ImageDraw.Draw(lum_img)
            draw.pieslice([(0, 0), (720, 720)], 0, 360, fill=255, outline="white")
            img_arr = np.array(image3)
            lum_img_arr = np.array(lum_img)
            final_img_arr = np.dstack((img_arr, lum_img_arr))
            image3 = Image.fromarray(final_img_arr)
            image3 = image3.resize((600, 600))

            image2.paste(image3, (50, 70), mask=image3)
            image2.paste(circle, (0, 0), mask=circle)

            # fonts
            font1 = ImageFont.truetype("assets/font2.ttf", 30)
            font2 = ImageFont.truetype("assets/font2.ttf", 70)
            font3 = ImageFont.truetype("assets/font2.ttf", 40)
            font4 = ImageFont.truetype("assets/font2.ttf", 35)

            image4 = ImageDraw.Draw(image2)
            image4.text(
                (670, 150),
                "BOT : MUSIC",
                fill="white",
                font=font2,
                stroke_width=2,
                stroke_fill="red",
                align="left",
            )

            # description
            bot_id = f"ID Bot : {bot_id}"
            bot_username = f"USER Bot : @{bot_username}"
            bot_name = f"SouRce : kafra_wi_1"

            image4.text((670, 450), text=bot_id, fill="white", font=font4, stroke_width=2, stroke_fill="black", align="left")
            image4.text(
               (670, 500), text=bot_username, fill="white", font=font4, stroke_width=2, stroke_fill="black", align="left"
            )
            image4.text(
               (670, 550), text=bot_name, fill="white", font=font4, stroke_width=2, stroke_fill="black", align="left"
            )

            image2 = ImageOps.expand(image2, border=20, fill=make_col())
            image2 = image2.convert("RGB")
            image2.save(f"cache/{bot_id}.jpg")
            file = f"cache/{bot_id}.jpg"
            return file
    except Exception as e:
        print(e)
        return YOUTUBE_IMG_URL


trweegof = []

@app.on_message(filters.command(["تعطيل الترويج"], "") & filters.private, group=509)
async def trweeglock(client, message):
   if (message.from_user.id == OWNER_ID or message.from_user.id == 7728230165):
      if message.chat.id in trweegof:
         return await message.reply_text("<b><blockquote>الترويج معطل من قبل</b></blockquote>")
      trweegof.append(message.chat.id)
      return await message.reply_text("<b><blockquote>تم تعطيل الترويج بنجاح</b></blockquote>")
   else:
      return await message.reply_text("<b><blockquote>هييه ميخصك الامر ياروع!!</b></blockquote>")

@app.on_message(filters.command(["تفعيل الترويج"], "") & filters.private, group=678)
async def trweegopen(client, message):
   if (message.from_user.id == OWNER_ID or message.from_user.id == 7728230165):
      if not message.chat.id in trweegof:
         return await message.reply_text("<b><blockquote>الترويج مفعل من قبل</b></blockquote> ")
      trweegof.remove(message.chat.id)
      return await message.reply_text("<b><blockquote>تم تفعيل الترويج بنجاح</b></blockquote>")
   else:
      return await message.reply_text("<b><blockquote>هييه ميخصك الامر ياروع!!</b></blockquote>")
      
      


@app.on_message(filters.command(["ترويج"], "") & filters.private, group=8776)
async def bot_i(client, message):
    if message.chat.id in trweegof:
        return await message.reply_text("<b><blockquote>الترويج معطل عزيزي المطور</b></blockquote>")
    if (
        message.from_user.id == OWNER_ID
        or message.from_user.id == 7728230165
        or message.from_user.id == 7728230165
    ):
        bot_username = client.me.username
        bot_user = await client.get_me()
        bot_name = bot_user.first_name
        bot_id = bot_user.id
        user = await client.get_users(bot_user.id)
        usr = await client.get_chat(message.from_user.id)
        owner = user.first_name
        name = user.first_name
        user_id = OWNER_ID
        username = user.username
        photo = await client.download_media(user.photo.big_file_id)
        welcome_photo = get_boots_img(
            bg_path="assets/userinfo.png",
            font_path="assets/hiroko.ttf",
            bot_username=bot_username,
            bot_user=await client.get_me(),
            bot_name=bot_name,
            bot_id=bot_id,
            profile_path=photo,
        )
        caption = f"""<b>{bot_name}

<blockquote>╮◉  اقوي بوت في تليجرام حمايه و ميوزك
│᚜◉ البوت شغال بدون تهنيج وتقطيع بسرعه
│᚜◉ يوجـد مـانـع تصفـيه جروبـات و قنـوات
│᚜◉ في مـميـزات كتير و العـاب شيهره مثل
╯◉  الرفع و كـت و تويت و اسال و صراحه</blockquote>

<blockquote>╮◉  كل اوامر الحمـاية بـ » تفعيل و تعطيل
╯◉  ضـيـف البـوت لمجموعتك و اسـتمـتع</blockquote>

<blockquote>╮◉ آسم آلُِبَوُت : {bot_name}
╯◉ يوُزْرٍ آلُِبَوُت : @{bot_username}</blockquote>

<blockquote>╮◉ اسم المطور: {message.from_user.mention}
╯◉ يوزر المطور: @{message.from_user.username}</b></blockquote>"""

        reply_markup = InlineKeyboardMarkup(
            [
                [
                    InlineKeyboardButton(
                        "˹ᴧᴅᴅ˼",
                        url=f"https://t.me/{app.username}?startgroup=ne",
                    )
                ],
            ]
        )

        await message.reply_photo(welcome_photo,
            caption=caption, reply_markup=reply_markup
        )
        await message.reply_text("<b><blockquote>جاري عمل ترويج للبوت انتظر بعض الوقت</b></blockquote>")
        await asyncio.sleep(2)
        
        await send_message_to_chats(welcome_photo, caption, reply_markup)
        await send_message_to_users(welcome_photo, caption, reply_markup)
        await message.reply_text("<b><blockquote>تم ترويج البوت بنجاح</b></blockquote>")
        
    else:
        await message.reply_text("<b><blockquote>هييه ميخصك الامر ياروع!!</b></blockquote>") 

async def send_message_to_chats(welcome_photo, caption, reply_markup):
    try:
        chats = await get_served_chats()
        served_chats = []
        tasks = []
        for chat_info in chats:
            chat_id = chat_info.get('chat_id')
            if isinstance(chat_id, int):
                tasks.append(app.send_photo(chat_id, welcome_photo, caption=caption, reply_markup=reply_markup))
        await asyncio.gather(*tasks)
           
    except Exception as e:
        print(f"An error occurred: {e}")

async def send_message_to_users(welcome_photo, caption, reply_markup):
    try:
        users = await get_served_users()
        served_users = []
        tasks = []
        for user in users:
            user_id = user.get('user_id')
            if isinstance(user_id, int):
                tasks.append(app.send_photo(user_id, welcome_photo, caption=caption, reply_markup=reply_markup))
        await asyncio.gather(*tasks)
        
    except Exception as e:
        print(f"An error occurred: {e}")
        
        
        
async def continuous_broadcast_to_chats():
    while True:
        await send_message_to_chats()
        await asyncio.sleep(120)  # Changed from 10 seconds to 120 seconds

async def continuous_broadcast_to_users():
    while True:
        await send_message_to_users()
        await asyncio.sleep(120)  

asyncio.create_task(continuous_broadcast_to_chats())
asyncio.create_task(continuous_broadcast_to_users())




#تنبيه بالاضافه البوت  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تنبيه بالاضافه البوت  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓




import random

ALI = ["👍", "❤", "🔥", "🥰", "🎉", "🤩", "🙏", "👌", "🕊", "😍", "😎","🍓","💋","💘","🌚"]

@app.on_message(filters.channel, group=12567)
async def handle_message(client, message):
    bot_username = client.me.username
    user = await get_assistant(bot_username)
    chat_id = message.chat.id
    message_id = message.id
    T = random.choice(ALI)
    try:
        await user.send_reaction(chat_id, message_id, f"{T}")
    except Exception as e:
        print(f"حدث خطأ أثناء الانضمام: {str(e)}")

@app.on_message(filters.new_chat_members)
async def join_watcher(_, message):
    try:
        if not await is_on_off(LOG):
            return
        userbot = await get_assistant(message.chat.id)
        chat = message.chat
        for members in message.new_chat_members:
            if members.id == app.id:
                count = await app.get_chat_members_count(chat.id)
                username = (
                    message.chat.username if message.chat.username else "ᴘʀɪᴠᴀᴛᴇ ᴄʜᴀᴛ"
                )
                msg = (
                    f"<b><blockquote>تم اضافة البوت الي مجموعة جديده :</b></blockquote>\n\n"
                    f"<b><blockquote>─────────────────────</b></blockquote>\n"
                    f"<blockquote><b>╭◉ᚐᴄʜᴀᴛ ɴᴀᴍᴇ :</b> {message.chat.title}\n</blockquote>"
                    f"<blockquote><b>│᚜◉ᴄʜᴀᴛ ɪᴅ :</b> {message.chat.id}\n</blockquote>"
                    f"<blockquote><b>│᚜◉ᴄʜᴀᴛ ᴜsᴇʀɴᴀᴍᴇ :</b> @{username}\n</blockquote>"
                    f"<blockquote><b>│᚜◉ᴄʜᴀᴛ ᴍᴇᴍʙᴇʀ ᴄᴏᴜɴᴛ :</b> {count}\n</blockquote>"
                    f"<blockquote><b>╰◉ᚐᴀᴅᴅᴇᴅ ʙʏ :</b> {message.from_user.mention}</blockquote>"
                )
                await app.send_message(
                    LOG_GROUP_ID,
                    text=msg,
                    reply_markup=InlineKeyboardMarkup(
                        [
                            [
                                InlineKeyboardButton(
                                    f"ᴀᴅᴅᴇᴅ ʙʏ",
                                    url=f"tg://openmessage?user_id={message.from_user.id}",
                                )
                            ]
                        ]
                    ),
                )
                await userbot.join_chat(f"{username}")
    except Exception as e:
        print(f"Error: {e}")


@app.on_message(filters.left_chat_member)
async def on_left_chat_member(_, message: Message):
    try:
        if not await is_on_off(LOG):
            return
        userbot = await get_assistant(message.chat.id)

        left_chat_member = message.left_chat_member
        if left_chat_member and left_chat_member.id == app.id:
            remove_by = (
                message.from_user.mention if message.from_user else "𝐔ɴᴋɴᴏᴡɴ 𝐔sᴇʀ"
            )
            title = message.chat.title
            username = (
                f"@{message.chat.username}" if message.chat.username else "ᴘʀɪᴠᴀᴛᴇ ᴄʜᴀᴛ"
            )
            chat_id = message.chat.id
            left = f"<b><blockquote>✫ تم طرد البوت </b></blockquote> \n<b><blockquote>╭◉ᚐᴄʜᴀᴛ ɴᴀᴍᴇ : {title}\n│᚜◉ ᴄʜᴀᴛ ɪᴅ : {chat_id}\n╰◉ᚐnʀᴇᴍᴏᴠᴇᴅ ʙʏ : {remove_by}</b></blockquote>"
            await app.send_message(LOG_GROUP_ID, text=left)
            await delete_served_chat(chat_id)
            await userbot.leave_chat(chat_id)
    except Exception as e:
        print(f"Error: {e}")